---
layout: post
author: dain
title: "[React-Native] Axios Put 400 Error"
date: 2022-08-30 10:21:00 +0900
categories: react-native
---

## Axios Put Method 400 Error

í”„ë¡œì íŠ¸ì—ì„œ Axios Put ë©”ì†Œë“œë¥¼ ì´ìš©í•œ ë‹‰ë„¤ì„ ë³€ê²½ API ìš”ì²­ì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì˜€ë‹¤.

```typescript
export async function updateNickname(params: string) {
  const response = await client.put(`user/update`, params);
  return response;
}
```

ê·¸ëŸ°ë° ë‹¤ìŒê³¼ ê°™ì´ 400 Errorë¥¼ ë°˜í™˜í–ˆë‹¤.

<!-- prettier-ignore -->
> [AxiosError: Request failed with status code 400]  
{: .prompt-danger }

bodyì— key-vlaue í˜•íƒœê°€ ì•„ë‹Œ Stringì„ ë‹´ì•„ì„œ ë³´ë‚´ëŠ” í˜•íƒœì˜ APIì˜€ë‹¤.
bodyì— ê°’ì´ ì˜ ì•ˆë‹´ê²¼ë‚˜ Configë¥¼ í™•ì¸í•´ë³´ì•˜ëŠ”ë°, dataì— Stringì´ ì˜ ë‹´ê²¨ìˆì—ˆë‹¤.

í˜¹ì‹œ APIì— ë¬¸ì œê°€ ìˆëŠ”ê±´ ì•„ë‹ê¹Œ í•˜ëŠ” í¬ë§ìœ¼ë¡œ PostManìœ¼ë¡œ ì‹œë„í•´ë³´ë‹ˆ ë„ˆë¬´ë‚˜ë„ ì˜ ë³´ë‚´ì§€ëŠ”ê²ƒ.
(ì–¸ì œë‚˜ ë¬¸ì œëŠ” ë‚´ë¶€ì— ìˆë‹¤...ğŸ¥²)

## Config

![config image](/assets/img/post/0830_config.png)
_JSON Parserë¡œ í™•ì¸í•œ config_

keyì™€ valueì˜ ìŒì˜ í˜•íƒœì¼ ê²½ìš°ì—ëŠ” 200 Requset Successê°€ ë°˜í™˜ëë‹¤. (ex `{"nickname": "dain"}`)
~~í•˜ì§€ë§Œ ë‹‰ë„¤ì„ì´ `{"nickname": "dain"}` ìì²´ë¡œ ë“±ë¡ë˜ì–´ ì˜ëª»ëœ ë°©ë²•.~~

ìœ„ì™€ ê°™ì´ key-value ìŒì˜ í˜•íƒœì¼ ë•Œì—ëŠ” 400 Bad Requestê°€ ëœ¨ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ê³¼, ê·¸ëƒ¥ ë¬¸ìì—´ë¡œ ë³´ëƒˆì„ ë•Œ body(data)ì— ì˜ ë“¤ì–´ê°”ìŒì—ë„ ì¸ì‹ì„ ëª»í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ ê°’ì„ ì¸ì‹í•˜ëŠ” íƒ€ì…ì˜ ë¬¸ì œì¼ ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤. ìœ„ì—ì„œ í™•ì¸ë˜ëŠ” Content-Type `application/x-www-form-urlencoded` ë¥¼ í™•ì¸í•´ë³´ì•˜ë‹¤.

## Content-Type : application/x-www-form-urlencoded

mdn web docs - POST | [https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST)
Mozilla Developer Network(MDN)ì—ëŠ” ì›¹í‘œì¤€ê³¼ ëª¨ì§ˆë¼ í”„ë¡œì íŠ¸ì— ê´€í•œ ê°œë°œ ë¬¸ì„œê°€ ì†Œê°œë˜ì–´ìˆë‹¤.
ì—¬ê¸°ì— application/x-www-form-urlencoded ì— ê´€í•œ ì„¤ëª…ì´ ìˆë‹¤.

ë¨¼ì € Headerì˜ Content-Typeì€ HTTP POSTë‚˜ PUT methodê°€ ë³´ë‚´ëŠ” bodyì˜ data typeë¥¼ ê°€ë¦¬í‚¨ë‹¤.
`application/x-www-form-urlencoded`ëŠ” ì´ POST ë©”ì†Œë“œì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” Content-Type ì¤‘ í•˜ë‚˜ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì†Œê°œë˜ì–´ìˆë‹¤.

> application/x-www-form-urlencoded: the keys and values are encoded in `key-value tuples` separated by '&', with a '=' between the key and the value. Non-alphanumeric characters in both keys and values are percent encoded: this is the reason why this type is not suitable to use with binary data (use multipart/form-data instead)
> {: .prompt-info }

í‚¤ì™€ ê°’ì´ `&key=value`ì™€ ê°™ì€ í˜•íƒœì˜ í‚¤-ê°’ íŠœí”Œë¡œ ì¸ì½”ë”©ëœë‹¤ëŠ” ë‚´ìš©ìœ¼ë¡œ, key-value í˜•íƒœê°€ ì•„ë‹Œ ë¬¸ìì—´ì„ ë³´ë‚´ê¸°ì— ì í•©í•˜ì§€ ì•ŠìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.

## Solution

Headerì˜ Content-Typeì„ text/plain ìœ¼ë¡œ ë°”ê¾¸ì–´ì£¼ë‹ˆ ì •ìƒì‘ë™í•˜ì˜€ë‹¤. ğŸ™‚

```typescript
export async function updateNickname(params: string) {
  const response = await client.put(`user/update`, params, {
    headers: { "Content-Type": "text/plain" },
  });
  return response;
}
```

## Reference

ğŸ™‚ https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST
